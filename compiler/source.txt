/*
Pointer optimization:
Before - 8706 instructions
Mild pointer optimizations - use of offset(base, scale): 7483

*/

asm{
	#include "CPU.asm"
	entry code
	data@ data
code:
	push $4664
	;call mm_init
	;call doublePointer
	;push $4660
	;call test
	call ptest
	hlt
};

fun print(var n){
	asm{
		out %r1
	};
}


fun ptest(){
	var *i = 512;
	while(i < 524){
		*i = 4660;
		i = i + 1;
	}
}
$$
